# Durable Memory — 2026-02-08

- Sean requested **always/auto-allow behavior** for operational commands and explicitly instructed: **stay in auto-allow mode until he disables it**.
- OpenClaw config was updated accordingly:
  - `tools.exec.security = "full"`
  - `tools.exec.ask = "off"`
  - `approvals.exec.enabled = false`
- Exec always-allow bins were expanded to cover core workflows, including Linear, GitHub, Notion, and HuggingFace related CLIs (`linear`, `gh`, `notion`, `huggingface-cli`, `hf`) plus supporting diagnostics/dev tooling.
- Notion documentation was created/updated for observability of allowlist + elevated receipt policy:
  - https://www.notion.so/OpenClaw-Exec-Always-Allow-Elevated-Receipt-Spec-2026-02-08-301b5f0c1a5181a4af4ff1f51413d5f7
- LockN Logger implementation for elevated-command receipts was completed and PR opened:
  - https://github.com/LockN-Labs/lockn-logger/pull/51
  - Includes standardized decision outcomes and receipt schema for auditability.
- Operational nuance captured: heredoc shell forms (e.g., `python3 - <<'PY'`) may still trigger approval-style handling in some paths; prefer `python3 -c` or script files for predictable execution behavior.
- Sean explicitly confirmed policy: **remain in auto-allow mode until he disables it**.
- Sean requirement clarified: even in auto-allow mode, keep logging/classifying commands that would have failed allowlist under strict mode for later review.
- Qwen3 Coder Next cron model issue mitigated by switching nightly architecture job model from full id (`llamacpp-coder-next/qwen3-coder-next-q5k`) to alias (`coder-next`) after seeing `model not allowed` error in run history.
- Dotnet test execution caveat confirmed for PR #51 validation path: worker environment used for that run does not have `dotnet` installed; branch `pr-51` was checked out but tests could not execute there.

## Additional durable updates (midday)

- Opus default thinking was explicitly changed to `medium` via gateway config (`agents.defaults.thinkingDefault = "medium"`).
- `lockn.ai` is live but intentionally routed to the **test web app** (same target as `test.lockn.ai`) until a true isolated prod stack is stood up.
- Linear agent invites were re-sent (`architect@`, `qa@`, `devops@`, `orchestrator@lockn.ai`), but catch-all email routing was still not delivering invites as of latest checks.
- GitHub repo mapping issue was fixed by normalizing remotes to `LockN-AI/...`; workspace `gh pr list` no longer fails on stale `lockn-ai/LockNGen` context.
- `lockn-gen` release pipeline incident was fixed end-to-end:
  - Docker restore missing test csproj fix merged.
  - GHCR owner/namespace mismatch fix merged.
  - Latest `Release` on main succeeded: https://github.com/LockN-Labs/lockn-gen/actions/runs/21801491918
- Sean confirmed Slack policy intent: keep Slack workspace comms **open** (groupPolicy open acceptable for this single-human workspace context).
- Sean preference for updates: send **main progress as new DM messages**, use thread replies only for deep rabbit-hole side discussions.
- LockN Suite strategy focus shifted to cashflow via capability-upgrades + OpenClaw skill integration; new revenue/integration tickets added: LOC-265, LOC-266, LOC-267, plus revenue funnel extension tickets LOC-270..LOC-273.
- Model-research direction validated by both Kimi and Codex passes: local-first core remains; prioritize realtime voice path + routing/reliability + RAG quality uplift for near-term monetization.

## Additional durable updates (pre-1:30 demo sprint)

- Sean issued explicit execution directive: **"Begin max turbo"** and **"Do not wait for approval in max turbo mode — just execute."**
- Sean set immediate demo target: 1:30 PM Test-env walkthrough sequence = **Speak → Score → Gen → Loader**.
- Test-env demo hardening shipped under turbo:
  - Merged `lockn-ai-platform` PR #16 (`feat(test-demo): turbo pack for 1:30 PM suite demo`).
  - Added/verified live demo routes returning 200: `/speak`, `/score`, `/gen`, `/loader`.
  - Added `https://test.lockn.ai/turbo/` launchpad for fast demo navigation/health checks.
  - Updated landing/docs links to test-domain paths for environment consistency.
- Current realism note for demos:
  - `Gen` and `Loader` are currently demo/status surfaces (not full end-to-end production flows on test edge yet).
- `lockn-logger` PR #51 CI failure root cause identified and patched:
  - Failure was non-idempotent Docker user creation (`groupadd appuser` already exists in image).
  - Fix committed to PR branch: idempotent user/group creation in Dockerfile.
  - New CI run triggered and pending after patch.

## Additional durable updates (afternoon strategy + ops)

- Sean feedback on demo quality: **Speak + Gen pass barebones**, **Loader placeholder**, **Score unusable**; alignment reset to treat current Score as early prototype and execute a V0.0.2 rescue + broader architecture realignment.
- Strategic architecture direction confirmed: **LockN Score is a vertical in the LockN Sense family**; plan is to unify LockN Listen + LockN Sound into a shared Sense layer, then build Score on top.
- Sean explicitly requested thorough planning with **Opus + Kimi + Codex**; research tracks were launched for LockN Sense architecture and ticket planning.
- Kimi research deliverable produced (`lockn-sense-research-brief.md`) with implementation-ready roadmap for unified Sense stack (event detection/classification/rules pipeline and staged rollout).
- Linear plan decision updated by Sean: upgraded to **Linear Business** and approved recurring cost at **$18/month**; direction is to fully leverage Business features (Slack integration, triage, agent workflows).
- Linear issue creation unblocked post-upgrade; Business rollout tickets created: **LOC-276, LOC-277, LOC-278, LOC-279**.
- Revenue execution conveyor advanced: **LOC-255** and **LOC-256** moved to **In Progress** for immediate implementation.
- Revenue execution expanded further: **LOC-257** and **LOC-270** also moved to **In Progress** to keep throughput active in parallel.
- Ops incident handled: `lockn-score-web` restart loop fixed (nginx non-root PID path issue), restored healthy service.
- Ops incident handled: `lockn-gen-api-1` crash due to missing `ApiKeys` relation; schema and migration history repaired, service restarted and health endpoint restored.

## Additional durable updates (late afternoon)

- Sean requested LockN Gen expansion to a media selector with **Image / Video / Music** and explicitly asked to use research triumvirate (**Opus + Kimi + Codex**) for model strategy.
- Gen execution tickets created for this expansion: **LOC-280** (media toggle UI), **LOC-281** (music integration), **LOC-282** (video async pipeline), **LOC-283** (model/quant benchmark).
- Research direction update for music model selection: recommendation shifted to **ACE-Step 1.5** as primary over HeartMULA on current hardware, with HeartMULA retained as optional fallback for multilingual/lyric-specific use cases.
- CI unblock fixes for `lockn-ai-platform` were propagated across PRs **#18, #19, #20** (Alpine user-creation compatibility + E2E environment assumptions + non-sudo Playwright install path) to recover failing checks.
- CI stabilization then expanded across **#18–#22** with repeated fixes for vision endpoint drift (`11441`→`11434`), stale VL model id, and brittle E2E assertions (waitlist/nav/footer) to reduce broad pipeline failures.
- Sean reconfirmed operating mode: continue in **auto-allow mode** for command approvals with receipt logging maintained.

## Additional durable updates (security + UX corrections)

- Sean flagged a real security gap: test users could hit `test.lockn.ai` services (notably Speak synthesis) without login/gating.
- Emergency access hardening was implemented as a proxy-level gate in `lockn-ai-platform` and opened as **PR #24** (`hotfix/test-env-emergency-gate`), adding immediate Basic Auth protection for high-risk test routes with documented deploy/rollback steps.
- Sean also flagged naming/nav quality issues in portfolio UI.
- Portfolio UI was corrected to show **"LockN Auth"** (instead of "Auth") and include **"LockN Gen"** alongside service options near Speak.
- Gen V0 media selector work shipped in platform as **PR #23** (image/video/music toggle; image live, video/music placeholder stubs) to support near-term product direction.

## Additional durable updates (late afternoon, post-3:50 PM)

- Sean requested HTTPS be explicitly put on roadmap/radar; Linear ticket **LOC-286** was created: *"Add HTTPS support roadmap item across LockN surfaces."*
- Sean then prioritized sequencing: **HTTPS before Stripe billing go-live**.
- Execution alignment recorded in Linear:
  - **LOC-286** was moved to **In Progress** with urgent priority.
  - **LOC-256** (Stripe Checkout + entitlements) was annotated with a dependency/gate note that production billing launch is blocked pending HTTPS baseline completion.
- Test deployment status verified and communicated to Sean:
  - **LockN Ship** is deployed on Test (`https://test.lockn.ai/ship/` returns 200).
  - **LockN Vibes** is **not** deployed on Test yet (`https://test.lockn.ai/vibes/` returns 404).
- Infra runbook signal captured: periodic GPU audit reported high VRAM allocation (~97.8%) with low utilization; this is being tracked operationally via heartbeat alerts/logs.

## Additional durable updates (around 4:00 PM)

- Sean requested: **"LockN Ship needs to be on the dashboard."**
- Implemented immediately in `lockn-ai-platform` portfolio dashboard (`web/portfolio/index.html`): added a **LockN Ship** card linking to `/ship/`.
- Verified on Test: `https://test.lockn.ai/portfolio/` now renders the Ship card.
- Sean asked whether Ship suggestions flow through to the team; current answer is **not fully yet**:
  - Ship form posts to `/api/suggestions` and route logic exists.
  - But running platform API containers currently lack `LINEAR_API_KEY`, so submissions cannot create Linear issues until env wiring is fixed.
- Deployment truth snapshot given to Sean:
  - **Ship** is live on Test (`/ship/` 200).
  - **Vibes** is not yet live on Test (`/vibes/` 404).

## Additional durable updates (around 4:15–4:25 PM)

- Sean confirmed immediate priority to make Ship suggestions fully operational; end-to-end flow was repaired and verified.
- Platform routing + env fixes applied so suggestions now reliably create Linear tickets:
  - `LINEAR_API_KEY` + `LINEAR_TEAM_ID` injected into `platform-api` and `platform-api-test` containers.
  - Caddy routing updated so `/api/suggestions*` proxies to `platform-api` (not `speak-api`) in both prod/test Caddyfiles.
  - `platform-api` TypeScript compile issue in `suggestions.ts` fixed (`response.json()` typed as `any`) to allow image rebuild/redeploy.
- Sean requested webhook/readout behavior: every Ship suggestion should land in Slack channel `<#C0ADK3HRJM9>` with summary + readout.
  - Implemented in `platform-api/src/routes/suggestions.ts` via Slack `chat.postMessage` using `SLACK_BOT_TOKEN`.
  - Added configurable env `SUGGESTIONS_SLACK_CHANNEL` (default `C0ADK3HRJM9`) in compose for prod/test platform-api services.
  - Verified live: submissions generated Linear issues and Slack readouts (e.g., LOC-289, LOC-291, LOC-292).
- Sean policy decision captured:
  - Users should **not** be forced to log in to submit Ship suggestions.
  - Users **should** be logged in to try apps.
- Emergency test gate adjusted accordingly:
  - Suggestions endpoint allowed unauthenticated.
  - App/demo routes remain gated.
  - Verified behavior on test edge: `/api/suggestions` succeeds (201) while `/speak/` still returns 401 without auth.

## Additional durable updates (evening, DMARC/DKIM + ops checks)

- Sean asked to switch focus to email deliverability hardening first (SPF/DKIM/DMARC) to unblock Linear invite email reliability.
- Live DNS verification snapshot for `lockn.ai`:
  - MX is correctly pointed at Google Workspace (`aspmx.l.google.com` + alts).
  - DMARC exists at `_dmarc.lockn.ai` with policy `p=quarantine`.
  - DKIM is currently missing (`google._domainkey.lockn.ai` had no TXT record).
  - SPF is misconfigured/broken (`include:dc-aa8e722993._spfm.lockn.ai` did not resolve).
- Agreed execution order for email auth remediation:
  1) fix SPF (`include:_spf.google.com` baseline),
  2) generate/publish Google DKIM key,
  3) start Gmail authentication in Admin,
  4) then tighten DMARC after alignment passes.
- Sean asked if OpenClaw vector memory is working; status check confirmed memory backend is `vector ready` and `fts ready`.
- Model identity checkpoint shared with Sean: main session currently running `anthropic/claude-opus-4-6`.

## Additional durable updates (late evening follow-through)

- DNS/email auth status improved and re-verified live:
  - SPF now set cleanly to `v=spf1 include:_spf.google.com ~all` at root.
  - DKIM TXT now present at `google._domainkey.lockn.ai`.
  - DMARC remains present at `_dmarc.lockn.ai` (`p=quarantine`).
- Linear org invites were re-sent successfully via API to:
  - `architect@lockn.ai`
  - `qa@lockn.ai`
  - `devops@lockn.ai`
  - `orchestrator@lockn.ai`
  (all resend mutations returned success; acceptance still pending).
- PR unblock work started on `lockn-ai-platform` PR #28:
  - Patched `web/Dockerfile` non-root user creation from Debian-style flags to Alpine-compatible syntax.
  - Result: `validate` check moved to SUCCESS on latest run.
  - Remaining blocker: `e2e-gpu` still failing; needs next fix iteration.
- Operational risk persisted through evening heartbeats:
  - Main session context repeatedly in critical range (~70–79%).
  - OpenClaw security audit remained at 4 critical findings pending explicit config hardening action.
