# 2026-02-06 Daily Notes

## LockN Score MVP - Swarm Complete

**All 9 MVP tickets done (LOC-125-132, LOC-134):**
- LOC-125: iPhone streaming research ✅ (WebRTC recommended)
- LOC-126: YOLOv8 ball detection ✅
- LOC-127: PANNs bounce detection ✅
- LOC-128: Audio+vision fusion ✅ (rally state machine)
- LOC-129: React dashboard ✅ (mobile-first, Tailwind)
- LOC-130: WebSocket spectator ✅
- LOC-131: Voice commands ✅ (Whisper integration)
- LOC-132: Persistence layer ✅ (SQLAlchemy + Alembic)
- LOC-134: Solo test mode ✅

LOC-133 is "Future" backlog (highlight clips + analytics).

**GitHub:** https://github.com/LockN-AI/lockn-score (commit 50a597b)

**Code locations:**
- Backend: `~/repos/lockn-score/src/` (main.py, api/, fusion/, db/, modes/, voice/)
- Vision: `~/repos/lockn-score/vision/`
- Audio: `~/repos/lockn-score/audio/` + `audio/samples/` (7 WAV files)
- Frontend: `~/repos/lockn-score/web/`
- Research: `~/.openclaw/workspace/lockn-score/docs/`

## Confidence Assessment (14:17 EST)
**Score: 7.85/10.00** — below 9.81 threshold

Gaps:
- Vision/audio need accuracy validation
- Fusion needs stress testing
- API missing error handling/rate limiting
- WebSocket needs reconnection strategy
- Frontend needs mobile testing

**Sean's directive (14:16 EST):** Fine-tune for ping pong bounce detection. Key distinction: TABLE BOUNCE vs PADDLE HIT are two separate sounds. Confidence must be driven by ACTUAL QA TESTING, not theoretical code review.

## Audio Samples Collected (14:31 EST)
- Downloaded 2:37 ping pong match from YouTube
- Extracted 6x 1-second clips at various timestamps
- Created manifest.json with labeling guide
- Files: `~/repos/lockn-score/audio/samples/`
- **Next:** Manual labeling of table bounce vs paddle hit

## PANNs Baseline QA (17:58 EST)
**Automated inference on 5 clips:**
| Clip | Top Detection | Confidence |
|------|--------------|------------|
| clip_10s | Rain on surface | 5.3% ❌ |
| clip_15s | Ping | 16.2% ⚠️ |
| clip_20s | Ping | 79.1% ✅ |
| clip_25s | Ping | 63.4% ✅ |
| clip_30s | Ping | 76.6% ✅ |

**Finding:** PANNs detects ping pong sounds with 63-79% confidence. The "Ping" category covers all ball impacts.
**Gap:** Cannot distinguish table bounce vs paddle hit with stock PANNs — needs acoustic feature analysis or custom classifier.

## Spectral Analyzer Complete (18:10 EST)
**Heartbeat autonomous work:**
- Built `audio/spectral_analyzer.py` — pure Python FFT analysis
- Features: peak frequency, attack/decay time, spectral centroid, ZCR
- Heuristic classifier for table bounce vs paddle hit
- Initial results from 6 clips: 5 table bounces, 1 paddle hit
- Runs via Docker workaround (no venv needed)
- Committed: d3ab273

**Key findings:**
| Clip | Peak Freq | Classification | Confidence |
|------|-----------|----------------|------------|
| clip_5s | 1707 Hz | table_bounce | 70% |
| clip_10s | 2720 Hz | table_bounce | 95% |
| clip_15s | 2402 Hz | table_bounce | 95% |
| clip_20s | 1477 Hz | paddle_hit | 60% |
| clip_25s | 3671 Hz | table_bounce | 95% |
| clip_30s | 2056 Hz | table_bounce | 95% |

**Observation:** Attack times (500-900ms) indicate multiple events per clip (rallies). Need per-event segmentation for precise classification.

## Event Segmenter Complete (18:27 EST)
**Commit:** 11e49b8

**Test Results:**
| Clip | Classification | Confidence |
|------|---------------|------------|
| clip_5s | TABLE_BOUNCE | 70% |
| clip_10s | TABLE_BOUNCE | 95% |
| clip_15s | TABLE_BOUNCE | 95% |
| clip_20s | PADDLE_HIT | 60% |
| clip_25s | TABLE_BOUNCE | 95% |
| clip_30s | TABLE_BOUNCE | 95% |

**Observation:** Current 1-sec clips contain sustained rally audio, so segmenter detects single continuous events. Need clips with clear gaps between impacts for multi-event detection.

**Next:** Need better sample clips with isolated impacts, or extract longer clips (~5-10 sec) to capture natural gaps between rallies

## Blockers
- Python venv needs `sudo apt install python3.12-venv`
- ~~Docker build for lockn-score-api in progress~~

## Infrastructure Fixes (14:54 EST)
**PANNs container bug found:**
- Health check passed but inference failed
- Missing `/root/panns_data/class_labels_indices.csv`
- Fixed Dockerfile to pre-download from AudioSet repo
- Rebuild in progress: `docker build -t lockn-panns:fixed`

**Whisper container:** ✅ Working (tested, returns hallucinated "Thank you." on ping pong audio - expected behavior for non-speech)

## Roadmap (confirmed by Sean)
1. LockN Score → Push until confidence > 9.81 (QA-validated)
2. LockN Speak → After Score
3. LockN Brain / Listen / Look → After Speak

## Sean's Standing Order (14:19 EST)
"In my absence please push forward with your best judgement"

## Notion Documentation Review (18:00 EST)

**6-hour automated review completed. Findings:**

### Accuracy Issues Fixed
1. **Infrastructure page:** Added missing `llama-coder-cpu.service` (port 11440, 2M context) — was running but not documented
2. **Skills Inventory page:** Added 3 missing workspace skills:
   - dual-process (System 1/2 routing)
   - dev-workflow (GitHub + Linear automation)  
   - lockn-logger (usage tracking)

### Issues Noted (No Fix Applied)
1. **Cron Jobs page:** Shows "OpenClaw Ecosystem Monitor" using Sonnet 4 — marked as NOT IN ALLOWLIST. Should be reconfigured or removed.
2. **Cron Jobs page:** Shows 2 jobs with "Last run failed (network error)" — may need investigation.

### Organization Improvements
- Updated all page callouts with review timestamp
- All pages now show: "Last sync: ... | Last review: ..."

### Verification
- All 5 llama.cpp services confirmed running via systemctl
- Hardware specs verified against TOOLS.md
- Model hierarchy matches MEMORY.md architecture decisions

**Next review:** 2026-02-07 00:00 EST (6-hour cycle)

## 2:17 PM - Heartbeat: LockN Score MVP Progress

**Completed:**
- All 9 MVP tickets (LOC-125-132, LOC-134) in Review
- Created GitHub repo: https://github.com/LockN-AI/lockn-score
- Committed 68 files, 7,586 LOC
- Frontend builds successfully (`npm run build`)

**Blocker:**
- Python venv requires `sudo apt install python3.12-venv`
- Integration testing blocked until Sean runs the sudo command

**Value Rating:** 8.5/10 (holding momentum post-swarm delivery)

## PR Workflow Mandate (19:45 EST)

Sean mandated PR-based workflow for all code changes:
- No direct commits to main
- Feature branches → PR → Review → Merge
- Review covers: code quality, SOLID, security, extensibility, correctness, composability, testability, maintainability, usability
- Orchestrator (Opus) owns end-to-end process
- Don't wait for Sean to merge — keep moving forward
- "The process itself is the observability we need"

Added to AGENTS.md for permanence.

## 21:17 EST - Heartbeat: PR Merge

**Merged:** lockn-infra PR #5 (LOC-138: Tailscale + Caddy)
- Commit: 6032c2d
- Squash merged to main
- LOC-138 infrastructure epic complete

## Session Summary (15:38 - 20:17 EST)

### Major Accomplishments

**LockN Score MVP Complete**
- LOC-124 closed as Done (9/9 tickets complete)
- All components: YOLO vision, PANNs audio, fusion, React dashboard, WebSocket spectator, voice commands, persistence, solo mode
- Dev environment running: API on :8000, Web on :3000
- GitHub releases: v0.1.0-mvp (lockn-score), v1.0.0 (lockn-logger)

**PR Workflow Mandated**
- Sean mandated all code changes go through PRs (19:45 EST)
- Review checklist: code quality, SOLID, security, extensibility, correctness, composability, testability, maintainability, usability
- Orchestrator (Opus) owns end-to-end process — don't wait for Sean to merge
- "The process itself is the observability we need"
- Added to AGENTS.md for permanence

**Infrastructure as Code**
- Created lockn-infra repo with Caddyfile, Tailscale ACLs, install scripts
- PR #5 approved and merged for Tailscale + Caddy setup
- LOC-138 epic with 5 subtasks (LOC-139-143)

**Integration Docs Created**
- docs/integrations/github.md — PR workflow, branch naming
- docs/integrations/linear.md — Ticket lifecycle
- docs/integrations/notion.md — Knowledge base sync
- Heartbeat strategy documented in Notion Cron Jobs page

**New Product Concepts**
- **LockN Smash** — Automated paddle sports venue platform (Top Golf for pickleball)
- **LockN Sense** — Unified multimodal perception (LOC-136 spike created)
- LOC-137: Generic sport refactor for multi-sport support

### Key Technical Decisions

**Python for ML Pipeline**
- Sean confirmed Python over C# for Score/Sense (ML ecosystem advantage)
- C# reserved for infrastructure, integrations, enterprise APIs

**Tailscale + Caddy for Dev Environment**
- dev.lockn.ai accessible only via Tailscale VPN
- Caddy binds to Tailscale interface with DNS-01 ACME certs
- Codex security review approved approach

**Parallel Compute Strategy**
- Updated HEARTBEAT.md with parallelism check
- Route implementation → Coder-Next, review → Qwen3-32B, research → Codex
- "NO IDLE HEARTBEATS" — always be producing value

### Research Completed
- LOC-104: PyTorch sm_120 strategy (Blackwell) — CUDA 12.8+ recommended
- ImageBind fine-tuning: LoRA on audio encoder fits in 96GB VRAM
- Pickleball audio: 1,100-1,200 Hz (much lower than ping pong 8-12 kHz)
- Auth0 integration guide for React SPA
- LockN Listen architecture gaps documented

### Issues Fixed
- PANNs container model checkpoint missing → Fixed with volume persistence
- LockN Logger database disconnected → Recreated containers with correct Host=postgres
- Recurring cron error: model not allowed llamacpp-qwen/qwen3-32b-q5k (needs config fix)

### Tickets Closed
- LOC-104, LOC-124, LOC-125

### Open Work
- LOC-138-143: Tailscale + Caddy implementation
- LOC-137: Generic sport refactor (PR pending)
- LOC-136: LockN Sense spike
- Dev agents completed: PIP video toggle, generic sport refactor, auth0 research, listen architecture

### Sean Quotes
- "The process itself is the observability we need to become the best we can be"
- "We are embracing Infra as Code"
- "Make sure we're using Next Coder and Codex to full capacity"
- Re: LockN Smash vision — "franchises across the country being like the 'Top Golf' of pickleball"

## Auth0 Waitlist System (20:23 EST)

Created **LOC-144** — Auth0 Waitlist & Access Control System

**Access Tiers:**
- Waitlist → No access (holding pattern)
- Beta Testers → test.lockn.ai access
- Early Access → lockn.ai (Prod) access

**Subtasks:**
- LOC-145: Auth0 Tenant Setup & Configuration
- LOC-146: Waitlist Signup API & Database
- LOC-147: Admin Dashboard - Waitlist Management
- LOC-148: Auth0 Access Grant Integration
- LOC-149: Email Notification System
- LOC-150: Environment-Based Access Control

**Cleanup Tickets:**
- LOC-151: Consolidate Docker Compose Files
- LOC-152: Remove Unused Model Weights
- LOC-153: Standardize Error Handling in APIs


## Chatterbox Voice Cloning - SUCCESS (02:08 EST)

**Problem solved:** torchaudio 2.6.0 (pip) incompatible with PyTorch 2.11.0a0 (custom Blackwell build)

**Solution:** Built torchaudio from source in Dockerfile:
```dockerfile
RUN pip install --no-cache-dir --no-build-isolation git+https://github.com/pytorch/audio.git@main
```

Plus installed chatterbox deps manually (excluding torch/torchaudio) to prevent version conflicts.

**Also fixed:** FileResponse race condition - temp directory cleaned up before file served. Changed to in-memory Response with io.BytesIO.

**Container:** `chatterbox:sm120-v4` running on port 8084
**Endpoint:** `POST /v1/clone` with `text` and `audio` form fields
**Performance:** ~75 it/s sampling on Blackwell GPU

**Test file:** `/home/sean/.openclaw/workspace/sean-voice-clone-test.wav`
